{"version":3,"sources":["../../src/pages/loans/loans.module.ts","../../src/pages/loans/loans.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoansPage } from './loans';\n\n@NgModule({\n  declarations: [\n    LoansPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoansPage),\n  ],\n})\nexport class LoansPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loans/loans.module.ts","import { Component } from '@angular/core';\nimport { \n  IonicPage, \n  NavController, \n  AlertController, \n  ViewController,\n  NavParams, \n  PopoverController} from 'ionic-angular';\nimport { SocketProvider } from \"../../providers/socket/socket\";\nimport { Socket } from 'ng-socket-io';\nimport { PopoverPage } from \"../popover/popover\";\nimport { resolve } from 'dns';\n\n// POPOVER EXPERIMENT\n// import {  } from 'ionic/angular';\n// import { PopoverComponent } from '../../component/popover/popover.component';\n\n@IonicPage()\n@Component({\n  selector: 'page-loans',\n  templateUrl: 'loans.html',\n})\nexport class LoansPage {\n  private loanType\n  private amount:number\n  private memberData:any = this.navParams.get('data');\n  private mno:any = this.memberData['MB.CUST.NO'];\n  private mloan:any;\n  private fosa:any;\n  private mloanAlert:any;\n  private fosaAlert:any;\n  private loanBals:any;\n\n  constructor(\n    private viewCtrl: ViewController,\n    private popoverCtrl: PopoverController,\n    private navCtrl: NavController, \n    private alertCtrl: AlertController,\n    private socketHelper: SocketProvider,\n    private socket: Socket,\n    private navParams: NavParams) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoansPage');\n    // this.presentPopover()\n  }\n\n  handleFosa(){\n    this.loanType = \"FOSA\"\n    console.log(\"fosa\")\n  }\n\n  onSelectF(){\n    this.loanType = \"FOSA\"\n    console.log(\"fosa\")\n  }\n\n  onSelectM(){\n    this.loanType = \"MLOAN\"\n    console.log(\"mloan\")\n  }  \n\n  handleMLoan(){\n    this.loanType = \"MLOAN\"\n    console.log(\"mloan\")\n  }\n\n  handleContinue(){\n    let memberData:any = this.navParams.get('data');\n    let mno:any = memberData['MB.CUST.NO'];\n    \n    // Check Loan Bal\n    /*\n    this.socketHelper.loanBalances(mno).then(() => {\n      this.socket.on('loanBalanceResult',(data)=>{\n        // console.log(\"LOAN BALANCE DATA:\",data.data)\n\n        return new Promise((resolve,reject) => {\n          resolve(\n            // this.dataSplitByComma = data.data.split(\",\")\n            this.loanBals = data.data.split(\",\").filter((el:any) => {\n              return !el.includes('VR')\n            }).map((el:any)=>{\n                return Object.assign({},el.split(\";\"))\n            })\n          )\n        }).then(() => {\n          this.loanBals.shift()           \n        }).then(() => {\n          console.log(this.loanBals)\n          this.loanBals.forEach((el:any) => {\n            if(el[0].length <= 1) {\n              this.loanBals = this.loanBals.splice(this.loanBals.indexOf(el),1)\n            }else {\n              \n            }\n          })\n        }) \n      })\n    })  \n    */\n    \n\n    \n\n    if(this.loanType == \"f\"){\n      this.socketHelper.applyFosaAdvance({mno:this.mno,amount:this.amount}).then(() => {\n        this.socket.on('applyFosaAdvanceResult',(data)=>{\n          return new Promise((resolve,reject) => {\n            resolve(\n              this.fosa = data.split(',')\n            )\n          })\n          .then(() => {\n            console.log(\"FOSA ADV RES DATA\", this.fosa);\n          })\n\n        })\n      })\n    }else if(this.loanType == \"m\"){\n      this.socketHelper.applyMLoan({mno:this.mno,amount:this.amount}).then(() => {\n        this.socket.on('applyMLoanResult',(data)=>{\n          return new Promise((resolve,reject) => {\n            resolve(\n              this.mloan = data.split(';') \n            )\n          })\n          .then(() => {\n            console.log(this.mloan)\n            if(this.mloan.includes('Dear  you have an existing Mloan, Please pay first before requesting for Another Mloan.') === true) {\n              let mloanAlert = this.alertCtrl.create({\n                title: `You have an existing Mloan, Please repay first before requesting another`,\n                buttons:[\n                  {\n                    text:'Repay',\n                    handler: () => {\n\n                    }\n                  }\n                ]\n              })\n              mloanAlert.present()\n            }\n          })            \n        })\n      })\n    }\n  }\n\n  presentPopover() {\n    let popover = this.popoverCtrl.create(PopoverPage,{},{cssClass: 'contact-popover'});\n    popover.present({\n      // ev: myEvent\n    })\n  }\n\n  logOut(){\n    this.navCtrl.setRoot('WelcomePage');\n  }  \n\n  onClose() {\n    this.viewCtrl.dismiss()\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/loans/loans.ts"],"sourceRoot":""}