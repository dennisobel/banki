{"version":3,"sources":["../../src/pages/billmanagement/billmanagement.module.ts","../../src/pages/billmanagement/billmanagement.ts"],"names":[],"mappings":"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","file":"25.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { BillmanagementPage } from './billmanagement';\n\n@NgModule({\n  declarations: [\n    BillmanagementPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(BillmanagementPage),\n  ],\n})\nexport class BillmanagementPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/billmanagement/billmanagement.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, AlertController, NavParams } from 'ionic-angular';\nimport { Storage } from '@ionic/storage';\nimport { SocketProvider } from \"../../providers/socket/socket\";\nimport { Socket } from 'ng-socket-io';\n\n@IonicPage()\n@Component({\n  selector: 'page-billmanagement',\n  templateUrl: 'billmanagement.html',\n})\nexport class BillmanagementPage {\n\n  private fosaArray:any[]=[];\n  private fosaBal:any;\n  private name:any;\n  private mainSavArray:any[]=[]\n  private mainSav:any;  \n\n  constructor(\n    private storage: Storage,\n    private socketHelper: SocketProvider,\n    private socket: Socket,\n    private navCtrl: NavController, \n    private alertCtrl: AlertController,\n    private navParams: NavParams) {\n\n      this.socket.on('airtimePurchaseData',(data)=>{\n        console.log(data)\n        let alert = this.alertCtrl.create({\n          title:\"AIRTIME PURCHASE FEEDBACK\",\n          message:data.data,\n          buttons:[\n            {\n              text:'Ok',\n              role:'Ok',\n              handler:data => {\n                console.log('Cancel clicked');\n              }          \n            },\n            \n          ]\n        })\n        alert.present()\n      })\n\n\n      this.socket.on('tokenPurchaseData',(data)=>{\n        console.log(data)\n        let alert = this.alertCtrl.create({\n          title:\"TOKEN PURCHASE FEEDBACK\",\n          message:data.data,\n          buttons:[\n            {\n              text:'Ok',\n              role:'Ok',\n              handler:data => {\n                console.log('Cancel clicked');\n              }          \n            },\n            \n          ]\n        })\n        alert.present()\n      })      \n  }\n\n  bills=[\n    {name:'Airtime',component:''},\n    {name:'Electricity',component:''}\n  ]\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad BillmanagementPage ...');\n\n    this.socket.on('balEnqData',(data)=>{\n      console.log(\"balEnqData:\",data)\n      \n      this.fosaArray = data.data[0]\n      \n      this.fosaBal = this.fosaArray[Object.keys(this.fosaArray)[3]]\n      this.mainSavArray = data.data[1]\n      this.mainSav = this.mainSavArray[Object.keys(this.mainSavArray)[3]]\n      this.name = this.mainSavArray[Object.keys(this.mainSavArray)[1]]\n      console.log(this.fosaBal, \":\",this.mainSav)\n    })    \n\n    \n  }\n\n  handlePurchase(item){\n    console.log(item)\n    let alert = this.alertCtrl.create({\n      title:`${item} purchase:`,\n      inputs:[\n        {\n          name:'amount',\n          placeholder:'Amount',\n          type:'number'\n        }\n      ],\n      buttons:[\n        {\n          text:'Cancel',\n          role:'cancel',\n          handler:data => {\n            console.log('Cancel clicked');\n          }          \n        },\n        {\n          text:'Buy',\n          handler:data => {\n            if(item === 'Airtime'){\n              this.socketHelper.airtimePurchase(data.amount)\n            }else if(item === 'Electricity'){\n              this.socketHelper.tokenPurchase(data.amount)\n            }            \n          } \n        },\n        {\n          text:'Kopa',\n          handler:data => {\n            if(item === 'Airtime'){\n              this.socketHelper.kopaAirtime(data.amount)\n            }else if(item === 'Electricity'){\n              console.log(\"kopa token coming soon\")\n            }            \n          } \n        }        \n      ]\n    })\n\n    alert.present()\n  }\n\n  logOut(){\n    this.navCtrl.setRoot('WelcomePage');\n  }  \n\n}\n\n/*\n\"1427FT18318TNXFW/OFS190280351666183.01/1,TRANSACTION.TYPE=ACAI:1:1,DEBIT.ACCT.NO=01030469011:1:1,CURRENCY.MKT.DR=1:1:1,DEBIT.CURRENCY=KES:1:1,DEBIT.AMOUNT=10.00:1:1,DEBIT.VALUE.DATE=20181114:1:1,DEBIT.THEIR.REF=Airtime Payment:1:1,CREDIT.THEIR.REF=Airtime Payment:1:1,CREDIT.ACCT.NO=KES1130600010001:1:1,CURRENCY.MKT.CR=1:1:1,CREDIT.CURRENCY=KES:1:1,CREDIT.VALUE.DATE=20181114:1:1,PROCESSING.DATE=20181114:1:1,ORDERING.BANK=KBS:1:1,CHARGE.COM.DISPLAY=NO:1:1,COMMISSION.CODE=DEBIT PLUS CHARGES:1:1,CHARGE.CODE=DEBIT PLUS CHARGES:1:1,PROFIT.CENTRE.CUST=30469:1:1,RETURN.TO.DEPT=NO:1:1,FED.FUNDS=NO:1:1,POSITION.TYPE=TR:1:1,MB.MEMBER.NO=30469:1:1,MB.MESSAGE=;Dear MWAKESI, your request for Airtime Payment of 10.00 has been processed successfully.;:1:1,AMOUNT.DEBITED=KES10.00:1:1,AMOUNT.CREDITED=KES10.00:1:1,CREDIT.COMP.CODE=KE0010001:1:1,DEBIT.COMP.CODE=KE0010001:1:1,LOC.AMT.DEBITED=10.00:1:1,LOC.AMT.CREDITED=10.00:1:1,CUST.GROUP.LEVEL=99:1:1,DEBIT.CUSTOMER=30469:1:1,DR.ADVICE.REQD.Y.N=N:1:1,CR.ADVICE.REQD.Y.N=N:1:1,CHARGED.CUSTOMER=30469:1:1,TOT.REC.COMM=0:1:1,TOT.REC.COMM.LCL=0:1:1,TOT.REC.CHG=0:1:1,TOT.REC.CHG.LCL=0:1:1,RATE.FIXING=NO:1:1,TOT.REC.CHG.CRCCY=0:1:1,TOT.SND.CHG.CRCCY=0.00:1:1,AUTH.DATE=20181114:1:1,STMT.NOS=186560351666183.02:1:1,STMT.NOS=1-2:2:1,CURR.NO=1:1:1,INPUTTER=3516_MOBILE__OFS_KBSBANK:1:1,DATE.TIME=1901281823:1:1,AUTHORISER=3516_MOBILE_OFS_KBSBANK:1:1,CO.CODE=KE0010001:1:1,DEPT.CODE=1:1:1|000|$$\"\n*/\n\n\n// WEBPACK FOOTER //\n// ./src/pages/billmanagement/billmanagement.ts"],"sourceRoot":""}